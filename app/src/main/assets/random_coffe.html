<html>

<head>
    <link rel="stylesheet" href="./bootstrap.min.css">
</head>


<body>
    <div class="container">

        <figure class="figure">
            <img id="imagem" class="img-thumbnail figure-img img-fluid rounded" src="./coffe.png" />
            <figcaption class="coffe figure-caption text-right"></figcaption>
        </figure>

        <button id="btn" class="btn btn-primary" onclick="sortear()"> Quem? </button>
    </div>


</body>

<script>
    /* Código Sujo By: Nicolas ;) */
    /* Código Limpo By: Gustavo ;) */

    let time = 0,
        membros = ["paulo.webp", "joao.webp", "silvan.webp", "aleatorio.webp", "nicolas.webp", "jean.webp", "rafa.jpg","enrico.jpeg","felipe.jpeg","flavio.jpeg","isac.webp","bubu.jpeg","edson.jpeg"],
        frases = ["SIS CARA É FODA MANO", "JÁ TAO ME PREJUDICANDO", "SILVAAAAN VIADO", "PODE SER O SILVAN", "NEM SOU GENTE", "...","RAFA CHRIS CHRIS","ENRIQUECENDO","FELIPINAS","FLAVEIRA","AIZAC","EMERSON BUBU","NHÊDSU"];
    var img = document.getElementById('imagem');

    function sortear() {
        ocultaBotao();
        geraImagensAleatorias();
        paraSorteioAposOTempo(6000);
    }

    function ocultaBotao() {
        document.querySelector('#btn').style.display = 'none';
    }

    function exibeBotao() {
        document.querySelector('#btn').style.display = 'block';
    }

    function geraImagensAleatorias() {
        time = setInterval(function() {

            var n = Math.floor(Math.random() * membros.length);

            img.src = membros[n];

                document.querySelector('.coffe').textContent = frases[n];
        }, 100);
    }

    function paraSorteioAposOTempo(timer) {
        setTimeout(function() {
            
            clearInterval(time);
            let nomeDaPessoaSorteada = document
                .querySelector('img')
                .getAttribute('src');
            console.log(nomeDaPessoaSorteada);
            //var recebeFrase = document.querySelector('.coffe').textContent;
            enviarNotificacao(nomeDaPessoaSorteada);
            exibeBotao();
            
        }, timer);
    }
    
    function enviarNotificacao(mensagem){
        android.enviarNotificacao(mensagem);
    }
    
</script>

<style>
    html,
    body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }

    .container {
        height: 100%;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center
    }

    #imagem {
        position: relative;
        cursor: pointer;
        width: 300px;
    }

    #btn {
        bottom: 29px;
        position: absolute;
    }

    .coffe {
        font-weight: bold;
        text-decoration: uppercase;
        text-align: center;
    }

</style>

</html>
